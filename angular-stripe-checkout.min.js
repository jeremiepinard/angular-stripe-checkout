(function(){"use strict";var e=angular.extend;var t="https://checkout.stripe.com/checkout.js";var n={key:"data-key",image:"data-image",name:"data-name",description:"data-description",amount:"data-amount",currency:"data-currency",panelLabel:"data-panel-label",zipCode:"data-zip-code",email:"data-email",label:"data-label",billingAddress:"data-billingAddress",shippingAddress:"data-shippingAddress"};angular.module("stripe.checkout",[]).directive("stripeCheckout",a).provider("StripeCheckout",i);a.$inject=["$parse","StripeCheckout"];function a(e,t){return{link:a};function a(n,a,r){var o,c=e(r.stripeCheckout)(n);t.load().then(function(){o=t.configure(i(a))});a.on("click",function(){if(o)o.open().then(function(e){c.apply(null,e)})})}function i(e){var t,a,i={};for(t in n){a=e.attr(n[t]);if(typeof a!=="undefined")i[t]=a}i.bitcoin=e.attr("data-bitcoin")=="true";i.allowRememberMe=e.attr("data-allow-remember-me")=="true";return i}}function i(){var t={};this.defaults=function(n){e(t,n)};this.load=function(e){return e.load()};this.load.$inject=["StripeCheckout"];this.$get=function(e,n){return new r(e,n,t)};this.$get.$inject=["$document","$q"]}function r(t,n,a){var i={},r;this.configure=function(t){return new o(n,e({},a,i,t))};this.load=function(){if(!r)r=c(t,n);return r};this.defaults=function(t){e(i,t)}}function o(t,n){var a,i;var r=StripeCheckout.configure(e({},n,{token:function(e,t){if(n.token)n.token(e,t);i=true;a.resolve([e,t])},closed:function(){if(n.closed)n.closed();if(!i)a.reject()}}));this.open=function(e){a=t.defer();i=false;r.open(e);return a.promise}}function c(e,n){var a=n.defer();var i=e[0],r=i.createElement("script");r.src=t;r.onload=function(){a.resolve()};r.onreadystatechange=function(){var e=this.readyState;if(e==="loaded"||e==="complete")a.resolve()};r.onerror=function(){a.reject(new Error("Unable to load checkout.js"))};var o=i.getElementsByTagName("head")[0];o.appendChild(r);return a.promise}})();